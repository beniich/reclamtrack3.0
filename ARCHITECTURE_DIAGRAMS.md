# ğŸ“ ReclamTrack - Diagrammes d'Architecture

> **ComplÃ©ment visuel au document ARCHITECTURE_COMPLETE.md**

---

## ğŸ—ï¸ 1. Architecture SystÃ¨me Globale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  UTILISATEURS                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Citoyens   â”‚  â”‚   Agents     â”‚  â”‚  Managers    â”‚  â”‚  Admins / Super    â”‚  â”‚
â”‚  â”‚  (Publics)  â”‚  â”‚ (Ã‰quipes)    â”‚  â”‚ (Superviseurs)â”‚  â”‚  (Administrateurs) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                  â”‚                    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            COUCHE FRONTEND (Next.js 15)                          â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Browser (HTTP/HTTPS + WebSocket)                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Pages React   â”‚  â”‚  Components   â”‚  â”‚  State Management          â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Dashboard   â”‚  â”‚  â€¢ UI Shadcn  â”‚  â”‚  â€¢ Zustand (Global State) â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Map         â”‚  â”‚  â€¢ Forms      â”‚  â”‚  â€¢ React Query (Server)   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Analytics   â”‚  â”‚  â€¢ Charts     â”‚  â”‚  â€¢ Socket.IO (Real-time)  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Admin       â”‚  â”‚  â€¢ Tables     â”‚  â”‚                            â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Routing       â”‚  â”‚  i18n         â”‚  â”‚  API Client                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Next Router â”‚  â”‚  â€¢ FR/AR      â”‚  â”‚  â€¢ Axios                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Middleware  â”‚  â”‚  â€¢ next-intl  â”‚  â”‚  â€¢ Interceptors            â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                          â”‚
â”‚                                      â”‚ HTTP REST + WebSocket                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          API GATEWAY (Port 5001)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â€¢ Routing & Load Balancing                                            â”‚    â”‚
â”‚  â”‚  â€¢ Authentication Proxy                                                 â”‚    â”‚
â”‚  â”‚  â€¢ Rate Limiting                                                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚                â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND MONOLITH (Port 5009)     â”‚          â”‚  MICROSERVICES (Kafka-based)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Express.js + TypeScript    â”‚  â”‚          â”‚  â”‚  Auth Service (3001)       â”‚  â”‚
â”‚  â”‚  â€¢ RESTful API (26 routes)  â”‚  â”‚          â”‚  â”‚  â€¢ Login/Register          â”‚  â”‚
â”‚  â”‚  â€¢ Business Logic           â”‚  â”‚          â”‚  â”‚  â€¢ JWT Generation          â”‚  â”‚
â”‚  â”‚  â€¢ Mongoose ODM             â”‚  â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â€¢ Socket.IO Server         â”‚  â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ JWT Auth                 â”‚  â”‚          â”‚  â”‚  Complaints Service (3002) â”‚  â”‚
â”‚  â”‚  â€¢ File Upload (Multer)     â”‚  â”‚          â”‚  â”‚  â€¢ CRUD + Validation       â”‚  â”‚
â”‚  â”‚  â€¢ Email (Nodemailer)       â”‚  â”‚          â”‚  â”‚  â€¢ Geo-tagging             â”‚  â”‚
â”‚  â”‚  â€¢ Payments (Stripe)        â”‚  â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â€¢ Winston Logging          â”‚  â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  â”‚  Teams Service (3003)      â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚  â”‚  â€¢ Team Assignment         â”‚  â”‚
â”‚  â”‚  Security Middleware        â”‚  â”‚          â”‚  â”‚  â€¢ Availability Check      â”‚  â”‚
â”‚  â”‚  â€¢ Helmet (Headers)         â”‚  â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  â€¢ CORS                     â”‚  â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ Rate Limiter             â”‚  â”‚          â”‚  â”‚  Notification Svc (3004)   â”‚  â”‚
â”‚  â”‚  â€¢ XSS Clean                â”‚  â”‚          â”‚  â”‚  â€¢ Email/SMS/Push          â”‚  â”‚
â”‚  â”‚  â€¢ Validation               â”‚  â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚  Analytics Service (3005)  â”‚  â”‚
                â”‚                               â”‚  â”‚  â€¢ Reporting & Metrics     â”‚  â”‚
                â”‚                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                â”‚                               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                â”‚                               â”‚  â”‚  Inventory Service (3006)  â”‚  â”‚
                â”‚                               â”‚  â”‚  â€¢ Stock Management        â”‚  â”‚
                â”‚                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MESSAGE BROKER - KAFKA (Port 9092)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Apache Kafka + Zookeeper                                              â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  Topics:                                                          â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ complaint.created    â€¢ complaint.assigned                      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ complaint.updated    â€¢ team.notified                          â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ intervention.started â€¢ notification.sent                       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  â€¢ analytics.generated  â€¢ inventory.updated                       â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  Schema Registry (Port 8081)                                     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Kafka UI (Port 8080)                                            â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BASE DE DONNÃ‰ES - MongoDB (Port 27017)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Collections (18):                                                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚  users       â”‚  â”‚  organizations   â”‚  â”‚  memberships            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  complaints  â”‚  â”‚  teams           â”‚  â”‚  assignments            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  interventionsâ”‚ â”‚  planning_slots  â”‚  â”‚  schedulers             â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  rosters     â”‚  â”‚  leaves          â”‚  â”‚  vehicles               â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  requisitionsâ”‚  â”‚  messages        â”‚  â”‚  knowledge              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  feedback    â”‚  â”‚  audit_logs      â”‚  â”‚  staff                  â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                          â”‚    â”‚
â”‚  â”‚  Indexes:                                                                â”‚    â”‚
â”‚  â”‚  â€¢ organizationId (Multi-tenant isolation)                               â”‚    â”‚
â”‚  â”‚  â€¢ location (Geospatial 2dsphere)                                        â”‚    â”‚
â”‚  â”‚  â€¢ email (Unique)                                                        â”‚    â”‚
â”‚  â”‚  â€¢ status + priority (Query optimization)                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MONITORING & OBSERVABILITY LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Prometheus (9090)     â”‚  â”‚  Grafana (3001)        â”‚  â”‚  Winston Logs  â”‚    â”‚
â”‚  â”‚  â€¢ Metrics Collection  â”‚  â”‚  â€¢ Dashboards          â”‚  â”‚  â€¢ info.log    â”‚    â”‚
â”‚  â”‚  â€¢ Time-series DB      â”‚  â”‚  â€¢ Alerting            â”‚  â”‚  â€¢ error.log   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚  Node Exporter (9100)  â”‚  â”‚  Kafka UI (8080)       â”‚                         â”‚
â”‚  â”‚  â€¢ System Metrics      â”‚  â”‚  â€¢ Topic Explorer      â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ 2. Flux de DonnÃ©es - CrÃ©ation de RÃ©clamation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FLUX COMPLET: NOUVELLE RÃ‰CLAMATION                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Ã‰TAPE 1: FRONTEND]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Citoyen                                 â”‚
â”‚  â””â”€ Navigue sur /map ou /dashboard         â”‚
â”‚  â””â”€ Clique "Nouvelle RÃ©clamation"          â”‚
â”‚  â””â”€ Remplit formulaire:                    â”‚
â”‚     â€¢ Titre                                 â”‚
â”‚     â€¢ Description                           â”‚
â”‚     â€¢ CatÃ©gorie (voirie, Ã©clairage...)     â”‚
â”‚     â€¢ Localisation (carte interactive)     â”‚
â”‚     â€¢ Photos (upload)                       â”‚
â”‚  â””â”€ Clique "Soumettre"                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ complaintStore.createComplaint(data)
                  â”‚ â†“
                  â”‚ api.post('/api/complaints', data, { headers: { Authorization: 'Bearer TOKEN' } })
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ Frontend API Client (Axios)            â”‚
â”‚  â””â”€ Envoie requÃªte HTTP POST               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ HTTP POST https://api.reclamtrack.com/api/complaints
                  â–¼

[Ã‰TAPE 2: API GATEWAY]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸšª API Gateway (Port 5001)                â”‚
â”‚  â””â”€ ReÃ§oit requÃªte                          â”‚
â”‚  â””â”€ VÃ©rifie rate limit (OK: 45/100 req)    â”‚
â”‚  â””â”€ Route vers Backend Monolith             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

[Ã‰TAPE 3: BACKEND - MIDDLEWARE PIPELINE]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸  Backend Express.js                     â”‚
â”‚                                             â”‚
â”‚  [1] Helmet Middleware                     â”‚
â”‚      â””â”€ Ajoute security headers            â”‚
â”‚          âœ“ X-Content-Type-Options         â”‚
â”‚          âœ“ X-Frame-Options                â”‚
â”‚      â”‚                                      â”‚
â”‚      â–¼                                      â”‚
â”‚  [2] CORS Middleware                       â”‚
â”‚      â””â”€ VÃ©rifie origine                    â”‚
â”‚          âœ“ Origin autorisÃ©                â”‚
â”‚      â”‚                                      â”‚
â”‚      â–¼                                      â”‚
â”‚  [3] Body Parser                           â”‚
â”‚      â””â”€ Parse JSON body                    â”‚
â”‚          âœ“ DonnÃ©es extraites               â”‚
â”‚      â”‚                                      â”‚
â”‚      â–¼                                      â”‚
â”‚  [4] Auth Middleware (middleware/auth.ts)  â”‚
â”‚      â””â”€ VÃ©rifie JWT token                  â”‚
â”‚      â””â”€ jwt.verify(token, JWT_SECRET)      â”‚
â”‚          âœ“ Token valide                    â”‚
â”‚      â””â”€ Extrait user:                      â”‚
â”‚          { _id, email, role, orgId }       â”‚
â”‚      â””â”€ Injecte dans req.user              â”‚
â”‚      â”‚                                      â”‚
â”‚      â–¼                                      â”‚
â”‚  [5] Org Context (middleware/orgContext.ts)â”‚
â”‚      â””â”€ RÃ©cupÃ¨re organization de user     â”‚
â”‚      â””â”€ Injecte req.organizationId         â”‚
â”‚          âœ“ orgId: "org_123456"             â”‚
â”‚      â”‚                                      â”‚
â”‚      â–¼                                      â”‚
â”‚  [6] Validator (express-validator)         â”‚
â”‚      â””â”€ Valide champs:                     â”‚
â”‚          âœ“ title: min 5, max 200 chars    â”‚
â”‚          âœ“ description: min 10 chars      â”‚
â”‚          âœ“ category: enum valide          â”‚
â”‚          âœ“ location: coords valides       â”‚
â”‚      â”‚                                      â”‚
â”‚      â–¼                                      â”‚
â”‚  [7] Route Handler (routes/complaints.ts)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

[Ã‰TAPE 4: LOGIQUE MÃ‰TIER]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ Controllers / Business Logic           â”‚
â”‚                                             â”‚
â”‚  const newComplaint = await Complaint.create({â”‚
â”‚    organizationId: req.organizationId,     â”‚
â”‚    citizenId: req.user._id,                â”‚
â”‚    title: req.body.title,                  â”‚
â”‚    description: req.body.description,      â”‚
â”‚    category: req.body.category,            â”‚
â”‚    priority: calculatePriority(...),       â”‚
â”‚    status: 'nouveau',                      â”‚
â”‚    location: {                             â”‚
â”‚      type: 'Point',                        â”‚
â”‚      coordinates: [lng, lat]               â”‚
â”‚    },                                       â”‚
â”‚    attachments: uploadedFiles,             â”‚
â”‚    createdAt: new Date()                   â”‚
â”‚  });                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

[Ã‰TAPE 5: DATABASE]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—„ï¸  MongoDB                               â”‚
â”‚  â””â”€ db.complaints.insertOne(...)           â”‚
â”‚      âœ“ Document insÃ©rÃ©                     â”‚
â”‚      âœ“ _id: "64f7a2b3c8e9d1a2b3c4d5e6"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

[Ã‰TAPE 6: KAFKA EVENT PUBLISHING]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¨ Kafka Producer                          â”‚
â”‚                                             â”‚
â”‚  await kafkaProducer.send({                â”‚
â”‚    topic: 'complaint.created',             â”‚
â”‚    messages: [{                             â”‚
â”‚      key: newComplaint._id,                â”‚
â”‚      value: JSON.stringify({               â”‚
â”‚        complaintId: newComplaint._id,      â”‚
â”‚        organizationId: newComplaint.orgId, â”‚
â”‚        category: newComplaint.category,    â”‚
â”‚        priority: newComplaint.priority,    â”‚
â”‚        location: newComplaint.location,    â”‚
â”‚        timestamp: new Date()               â”‚
â”‚      })                                     â”‚
â”‚    }]                                       â”‚
â”‚  });                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   KAFKA BROKER      â”‚
        â”‚  Topic: complaint   â”‚
        â”‚        .created     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                 â–¼

[Ã‰TAPE 7: MICROSERVICES CONSUMERS]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Complaints Service      â”‚    â”‚  Teams Service           â”‚
â”‚  (Port 3002)             â”‚    â”‚  (Port 3003)             â”‚
â”‚                          â”‚    â”‚                          â”‚
â”‚  Consume: complaint.created   â”‚  Consume: complaint.assigned
â”‚  â”‚                       â”‚    â”‚  â”‚                       â”‚
â”‚  â–¼                       â”‚    â”‚  â–¼                       â”‚
â”‚  [Auto-Assignment Logic]â”‚    â”‚  [Notify Team]           â”‚
â”‚  â€¢ Analyse catÃ©gorie    â”‚    â”‚  â€¢ RÃ©cupÃ¨re team details â”‚
â”‚  â€¢ Trouve Ã©quipe dispo  â”‚    â”‚  â€¢ PrÃ©pare notification  â”‚
â”‚  â€¢ Assigne complaint    â”‚    â”‚  â”‚                       â”‚
â”‚  â”‚                       â”‚    â”‚  â–¼                       â”‚
â”‚  â–¼                       â”‚    â”‚  Publish: team.notified  â”‚
â”‚  Publish:                â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  complaint.assigned      â”‚              â”‚
â”‚  {                       â”‚              â”‚
â”‚    complaintId: "...",   â”‚              â–¼
â”‚    teamId: "team_789"    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  }                       â”‚    â”‚  Notification Service    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  (Port 3004)             â”‚
           â”‚                    â”‚                          â”‚
           â”‚                    â”‚  Consume: team.notified  â”‚
           â”‚                    â”‚  â”‚                       â”‚
           â”‚                    â”‚  â–¼                       â”‚
           â”‚                    â”‚  [Send Notifications]    â”‚
           â”‚                    â”‚  â€¢ Email to team lead    â”‚
           â”‚                    â”‚  â€¢ SMS alerts            â”‚
           â”‚                    â”‚  â€¢ Push notification     â”‚
           â”‚                    â”‚  â”‚                       â”‚
           â”‚                    â”‚  â–¼                       â”‚
           â”‚                    â”‚  Publish:                â”‚
           â”‚                    â”‚  notification.sent       â”‚
           â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼

[Ã‰TAPE 8: BACKEND SAGA CONSUMER]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ Backend Saga Consumer                   â”‚
â”‚  (services/sagaConsumer.ts)                 â”‚
â”‚                                             â”‚
â”‚  Consume: complaint.assigned                â”‚
â”‚  â”‚                                           â”‚
â”‚  â–¼                                           â”‚
â”‚  await Complaint.findByIdAndUpdate(         â”‚
â”‚    complaintId,                             â”‚
â”‚    {                                         â”‚
â”‚      assignedTeamId: teamId,                â”‚
â”‚      status: 'en cours',                    â”‚
â”‚      updatedAt: new Date()                  â”‚
â”‚    }                                         â”‚
â”‚  );                                          â”‚
â”‚  â”‚                                           â”‚
â”‚  â–¼                                           â”‚
â”‚  logger.info('Complaint assigned successfully');â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

[Ã‰TAPE 9: REAL-TIME NOTIFICATION]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”Œ Socket.IO Server                        â”‚
â”‚  (services/socketService.ts)                â”‚
â”‚                                             â”‚
â”‚  notificationService.broadcast({            â”‚
â”‚    type: 'complaint_updated',              â”‚
â”‚    data: {                                  â”‚
â”‚      complaintId: "...",                   â”‚
â”‚      status: 'en cours',                   â”‚
â”‚      assignedTeam: "Ã‰quipe Route Nord"     â”‚
â”‚    },                                       â”‚
â”‚    targetOrg: organizationId               â”‚
â”‚  });                                        â”‚
â”‚  â”‚                                           â”‚
â”‚  â””â”€â–¶ EnvoyÃ© Ã  tous les clients connectÃ©s   â”‚
â”‚      de cette organisation                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ WebSocket Message
                  â–¼

[Ã‰TAPE 10: FRONTEND REAL-TIME UPDATE]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ–¥ï¸  Frontend (Socket.IO Client)           â”‚
â”‚  (lib/socket.ts)                            â”‚
â”‚                                             â”‚
â”‚  socket.on('complaint_updated', (data) => {â”‚
â”‚    // Mise Ã  jour du state Zustand         â”‚
â”‚    complaintStore.updateComplaint(data);   â”‚
â”‚    â”‚                                         â”‚
â”‚    // Notification toast                    â”‚
â”‚    toast.success('RÃ©clamation assignÃ©e!'); â”‚
â”‚    â”‚                                         â”‚
â”‚    // React Query invalidation              â”‚
â”‚    queryClient.invalidateQueries(['complaints']);â”‚
â”‚  });                                        â”‚
â”‚  â”‚                                           â”‚
â”‚  â–¼                                           â”‚
â”‚  [UI Re-render]                             â”‚
â”‚  â€¢ Dashboard met Ã  jour stats              â”‚
â”‚  â€¢ Liste des rÃ©clamations actualisÃ©e       â”‚
â”‚  â€¢ Badge de notification affichÃ©           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

[Ã‰TAPE 11: RETOUR HTTP]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… RÃ©ponse HTTP                            â”‚
â”‚                                             â”‚
â”‚  Backend â†’ API Gateway â†’ Frontend          â”‚
â”‚                                             â”‚
â”‚  Status: 201 Created                        â”‚
â”‚  Body: {                                    â”‚
â”‚    success: true,                          â”‚
â”‚    complaint: {                             â”‚
â”‚      _id: "64f7a2b3c8e9d1a2b3c4d5e6",      â”‚
â”‚      title: "Nid de poule...",             â”‚
â”‚      status: "nouveau",                    â”‚
â”‚      assignedTeamId: null,    // Assignation asyncâ”‚
â”‚      createdAt: "2026-02-17T08:00:00Z"     â”‚
â”‚    }                                        â”‚
â”‚  }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Citoyen voit:                           â”‚
â”‚  âœ“ Message de confirmation                 â”‚
â”‚  âœ“ RÃ©clamation crÃ©Ã©e avec #ID               â”‚
â”‚  ğŸ”” (Quelques secondes aprÃ¨s)               â”‚
â”‚  âœ“ Notification: "Ã‰quipe assignÃ©e!"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â±ï¸  Chronologie:                                            â”‚
â”‚  â€¢ T+0ms:    Soumission formulaire                          â”‚
â”‚  â€¢ T+50ms:   Validation backend                             â”‚
â”‚  â€¢ T+100ms:  Insertion MongoDB                              â”‚
â”‚  â€¢ T+120ms:  RÃ©ponse HTTP 201 envoyÃ©e                       â”‚
â”‚  â€¢ T+150ms:  Event Kafka publiÃ©                             â”‚
â”‚  â€¢ T+200ms:  Microservices traitent                         â”‚
â”‚  â€¢ T+500ms:  Assignment effectuÃ©, DB mise Ã  jour            â”‚
â”‚  â€¢ T+520ms:  WebSocket notification envoyÃ©e                 â”‚
â”‚  â€¢ T+530ms:  UI mise Ã  jour en temps rÃ©el                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ 3. SchÃ©ma Base de DonnÃ©es (ERD)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MONGODB DATABASE SCHEMA                              â”‚
â”‚                         Database: reclamtrack                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ORGANIZATIONS         â”‚  ğŸ¢ EntitÃ©s principales
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId [PK]       â”‚
â”‚ name: String             â”‚
â”‚ type: String             â”‚  â† 'municipality' | 'company'
â”‚ email: String            â”‚
â”‚ phone: String            â”‚
â”‚ address: Object          â”‚
â”‚ settings: Object         â”‚
â”‚ subscription: {          â”‚
â”‚   plan: String          â”‚
â”‚   status: String        â”‚
â”‚   expiresAt: Date       â”‚
â”‚ }                        â”‚
â”‚ billing: Object          â”‚
â”‚ createdAt: Date          â”‚
â”‚ updatedAt: Date          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                                        â”‚
         â–¼                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MEMBERSHIPS          â”‚  ğŸ”— Table de liaison       â”‚        USERS             â”‚  ğŸ‘¤
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId [PK]       â”‚                            â”‚ _id: ObjectId [PK]       â”‚
â”‚ userId: ObjectId [FK] â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ email: String [UNIQUE]   â”‚
â”‚ organizationId: ObjectId â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ password: String (hashed)â”‚
â”‚ role: String             â”‚  N:M                       â”‚ firstName: String        â”‚
â”‚ permissions: [String]    â”‚                            â”‚ lastName: String         â”‚
â”‚ status: String           â”‚                            â”‚ phone: String            â”‚
â”‚ joinedAt: Date           â”‚                            â”‚ role: String             â”‚
â”‚ createdAt: Date          â”‚                            â”‚   â† 'citizen' | 'agent'  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚      'manager' | 'admin' â”‚
                                                        â”‚      'superadmin'        â”‚
                                                        â”‚ avatar: String           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ preferences: Object      â”‚
         â”‚                                              â”‚ createdAt: Date          â”‚
         â”‚                                              â”‚ updatedAt: Date          â”‚
         â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                       â”‚
         â”‚                                                       â”‚ 1:N (crÃ©ateur)
         â”‚                                                       â”‚
         â”‚ N:1 (organisation)                                   â–¼
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     COMPLAINTS           â”‚  ğŸ“‹ RÃ©clamations citoyennes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId [PK]       â”‚
â”‚ organizationId: ObjectId â”‚  â† Multi-tenant key
â”‚ citizenId: ObjectId [FK] â”‚â”€â”€â”€â”€â”
â”‚ title: String            â”‚    â”‚
â”‚ description: String      â”‚    â”‚
â”‚ category: String         â”‚    â”‚ 1:1 (citoyen)
â”‚   â† 'voirie' | 'Ã©clairage'    â”‚
â”‚      'dÃ©chets' | 'autre' â”‚    â–¼
â”‚ priority: String         â”‚  (USERS)
â”‚   â† 'basse' | 'moyenne'  â”‚
â”‚      'haute' | 'urgente' â”‚
â”‚ status: String           â”‚
â”‚   â† 'nouveau' | 'en cours'â”‚
â”‚      'rÃ©solu' | 'fermÃ©'  â”‚
â”‚ location: {              â”‚  â† GeoJSON Point (pour carte)
â”‚   type: 'Point',         â”‚
â”‚   coordinates: [lng, lat]â”‚
â”‚ }                        â”‚
â”‚ assignedTeamId: ObjectId â”‚â”€â”€â”€â”€â”
â”‚ attachments: [{          â”‚    â”‚ N:1 (Ã©quipe)
â”‚   url: String,           â”‚    â”‚
â”‚   type: String           â”‚    â”‚
â”‚ }]                       â”‚    â–¼
â”‚ estimatedCost: Number    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ actualCost: Number       â”‚  â”‚        TEAMS             â”‚  ğŸ‘¥
â”‚ resolvedAt: Date         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ createdAt: Date          â”‚  â”‚ _id: ObjectId [PK]       â”‚
â”‚ updatedAt: Date          â”‚  â”‚ organizationId: ObjectId â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ name: String             â”‚
         â”‚                    â”‚ specialty: String        â”‚
         â”‚ 1:N                â”‚ members: [ObjectId]      â”‚  â† RÃ©fÃ©rences vers USERS
         â”‚                    â”‚ leaderId: ObjectId       â”‚
         â–¼                    â”‚ availability: String     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ status: String           â”‚
â”‚     ASSIGNMENTS          â”‚  â”‚ createdAt: Date          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ _id: ObjectId [PK]       â”‚           â”‚
â”‚ complaintId: ObjectId    â”‚           â”‚ 1:N
â”‚ teamId: ObjectId         â”‚           â”‚
â”‚ assignedBy: ObjectId     â”‚           â–¼
â”‚ assignedAt: Date         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ notes: String            â”‚  â”‚    INTERVENTIONS         â”‚  ğŸ”§
â”‚ createdAt: Date          â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ _id: ObjectId [PK]       â”‚
                              â”‚ complaintId: ObjectId    â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ teamId: ObjectId         â”‚
         â”‚                    â”‚ status: String           â”‚
         â”‚                    â”‚   â† 'scheduled' |        â”‚
         â”‚                    â”‚      'in_progress' |     â”‚
         â”‚                    â”‚      'completed'         â”‚
         â”‚ 1:N                â”‚ checkInTime: Date        â”‚
         â”‚                    â”‚ checkOutTime: Date       â”‚
         â–¼                    â”‚ duration: Number (mins)  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ report: String           â”‚
â”‚     PLANNING_SLOTS       â”‚  â”‚ materialUsed: [Object]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ createdAt: Date          â”‚
â”‚ _id: ObjectId [PK]       â”‚  â”‚ updatedAt: Date          â”‚
â”‚ organizationId: ObjectId â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ teamId: ObjectId         â”‚
â”‚ startTime: Date          â”‚
â”‚ endTime: Date            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ taskId: ObjectId         â”‚  â”‚       VEHICLES           â”‚  ğŸš—
â”‚ taskType: String         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ status: String           â”‚  â”‚ _id: ObjectId [PK]       â”‚
â”‚ createdAt: Date          â”‚  â”‚ organizationId: ObjectId â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ registration: String     â”‚
                              â”‚ type: String             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ make: String             â”‚
â”‚      SCHEDULERS          â”‚  â”‚ model: String            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ year: Number             â”‚
â”‚ _id: ObjectId [PK]       â”‚  â”‚ status: String           â”‚
â”‚ organizationId: ObjectId â”‚  â”‚ assignedTeamId: ObjectId â”‚
â”‚ title: String            â”‚  â”‚ maintenanceHistory: [{   â”‚
â”‚ description: String      â”‚  â”‚   date: Date,            â”‚
â”‚ startTime: Date          â”‚  â”‚   type: String,          â”‚
â”‚ endTime: Date            â”‚  â”‚   cost: Number           â”‚
â”‚ type: String             â”‚  â”‚ }]                       â”‚
â”‚ attendees: [ObjectId]    â”‚  â”‚ createdAt: Date          â”‚
â”‚ location: String         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ createdAt: Date          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚      REQUISITIONS        â”‚  ğŸ“¦
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        ROSTERS           â”‚  â”‚ _id: ObjectId [PK]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ organizationId: ObjectId â”‚
â”‚ _id: ObjectId [PK]       â”‚  â”‚ requestedBy: ObjectId    â”‚
â”‚ organizationId: ObjectId â”‚  â”‚ items: [{                â”‚
â”‚ teamId: ObjectId         â”‚  â”‚   name: String,          â”‚
â”‚ date: Date               â”‚  â”‚   quantity: Number,      â”‚
â”‚ shifts: [{               â”‚  â”‚   unit: String           â”‚
â”‚   memberId: ObjectId,    â”‚  â”‚ }]                       â”‚
â”‚   startTime: String,     â”‚  â”‚ status: String           â”‚
â”‚   endTime: String,       â”‚  â”‚ approvedBy: ObjectId     â”‚
â”‚   role: String           â”‚  â”‚ deliveryDate: Date       â”‚
â”‚ }]                       â”‚  â”‚ createdAt: Date          â”‚
â”‚ createdAt: Date          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LEAVES           â”‚  â”‚        MESSAGES          â”‚  ğŸ’¬
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId [PK]       â”‚  â”‚ _id: ObjectId [PK]       â”‚
â”‚ userId: ObjectId         â”‚  â”‚ senderId: ObjectId       â”‚
â”‚ type: String             â”‚  â”‚ recipientId: ObjectId    â”‚
â”‚ startDate: Date          â”‚  â”‚ subject: String          â”‚
â”‚ endDate: Date            â”‚  â”‚ content: String          â”‚
â”‚ reason: String           â”‚  â”‚ read: Boolean            â”‚
â”‚ status: String           â”‚  â”‚ readAt: Date             â”‚
â”‚   â† 'pending' |          â”‚  â”‚ createdAt: Date          â”‚
â”‚      'approved' |        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚      'rejected'          â”‚
â”‚ approvedBy: ObjectId     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ createdAt: Date          â”‚  â”‚       KNOWLEDGE          â”‚  ğŸ“š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                              â”‚ _id: ObjectId [PK]       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ organizationId: ObjectId â”‚
â”‚        FEEDBACK          â”‚  â”‚ title: String            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ content: String          â”‚
â”‚ _id: ObjectId [PK]       â”‚  â”‚ category: String         â”‚
â”‚ userId: ObjectId         â”‚  â”‚ tags: [String]           â”‚
â”‚ organizationId: ObjectId â”‚  â”‚ author: ObjectId         â”‚
â”‚ complaintId: ObjectId    â”‚  â”‚ views: Number            â”‚
â”‚ type: String             â”‚  â”‚ helpful: Number          â”‚
â”‚ rating: Number (1-5)     â”‚  â”‚ attachments: [String]    â”‚
â”‚ message: String          â”‚  â”‚ createdAt: Date          â”‚
â”‚ createdAt: Date          â”‚  â”‚ updatedAt: Date          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       AUDIT_LOGS         â”‚  â”‚         STAFF            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ _id: ObjectId [PK]       â”‚  â”‚ _id: ObjectId [PK]       â”‚
â”‚ organizationId: ObjectId â”‚  â”‚ organizationId: ObjectId â”‚
â”‚ userId: ObjectId         â”‚  â”‚ userId: ObjectId         â”‚
â”‚ action: String           â”‚  â”‚ position: String         â”‚
â”‚   â† 'CREATE' | 'UPDATE'  â”‚  â”‚ department: String       â”‚
â”‚      'DELETE' | 'LOGIN'  â”‚  â”‚ hireDate: Date           â”‚
â”‚ resource: String         â”‚  â”‚ salary: Number           â”‚
â”‚   â† 'complaint' | 'user' â”‚  â”‚ status: String           â”‚
â”‚      'team' | 'org'      â”‚  â”‚ createdAt: Date          â”‚
â”‚ resourceId: ObjectId     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ metadata: Object         â”‚
â”‚ ipAddress: String        â”‚
â”‚ userAgent: String        â”‚
â”‚ timestamp: Date          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INDEXES (Optimisation)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ users.email (unique)                                         â”‚
â”‚ â€¢ complaints.organizationId + complaints.status                â”‚
â”‚ â€¢ complaints.location (2dsphere pour requÃªtes gÃ©ospatiales)    â”‚
â”‚ â€¢ organizations.name                                            â”‚
â”‚ â€¢ audit_logs.organizationId + audit_logs.timestamp (desc)      â”‚
â”‚ â€¢ teams.organizationId                                          â”‚
â”‚ â€¢ memberships.userId + memberships.organizationId              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” 4. Flux d'Authentification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FLUX D'AUTHENTIFICATION JWT                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[OPTION 1: LOGIN CLASSIQUE]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Utilisateur â”‚
â”‚  /login page    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Saisit email + password
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend (Login Form)              â”‚
â”‚  â””â”€ Validation locale (Zod)         â”‚
â”‚  â””â”€ POST /api/auth/login            â”‚
â”‚     Body: { email, password }       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend: POST /api/auth/login      â”‚
â”‚  (routes/auth.ts)                   â”‚
â”‚                                     â”‚
â”‚  [1] Validation inputs              â”‚
â”‚      express-validator              â”‚
â”‚      âœ“ Email valide                 â”‚
â”‚      âœ“ Password non-vide            â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [2] Recherche utilisateur          â”‚
â”‚      const user = await User.findOne({ email });â”‚
â”‚      if (!user) â†’ 401 Unauthorized  â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [3] VÃ©rification mot de passe      â”‚
â”‚      const isValid = await bcrypt.compare(â”‚
â”‚        password,                    â”‚
â”‚        user.password                â”‚
â”‚      );                              â”‚
â”‚      if (!isValid) â†’ 401            â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [4] RÃ©cupÃ©ration organisation      â”‚
â”‚      const membership = await Membership.findOne({â”‚
â”‚        userId: user._id             â”‚
â”‚      });                             â”‚
â”‚      const org = await Organization.findById(â”‚
â”‚        membership.organizationId    â”‚
â”‚      );                              â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [5] GÃ©nÃ©ration JWT                 â”‚
â”‚      const token = jwt.sign(        â”‚
â”‚        {                             â”‚
â”‚          userId: user._id,          â”‚
â”‚          email: user.email,         â”‚
â”‚          role: user.role,           â”‚
â”‚          orgId: org._id             â”‚
â”‚        },                            â”‚
â”‚        process.env.JWT_SECRET,      â”‚
â”‚        { expiresIn: '7d' }          â”‚
â”‚      );                              â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [6] Audit log                      â”‚
â”‚      await AuditLog.create({        â”‚
â”‚        userId: user._id,            â”‚
â”‚        action: 'LOGIN',             â”‚
â”‚        timestamp: new Date()        â”‚
â”‚      });                             â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [7] RÃ©ponse                        â”‚
â”‚      res.json({                     â”‚
â”‚        success: true,               â”‚
â”‚        token,                        â”‚
â”‚        user: {                       â”‚
â”‚          _id, email, role,          â”‚
â”‚          firstName, lastName        â”‚
â”‚        },                            â”‚
â”‚        organization: { ... }        â”‚
â”‚      });                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend reÃ§oit rÃ©ponse            â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [1] Stockage token                 â”‚
â”‚      localStorage.setItem('token', token);â”‚
â”‚      // OU cookie HttpOnly (plus sÃ©curisÃ©)â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [2] Mise Ã  jour state Zustand      â”‚
â”‚      authStore.setUser(user);       â”‚
â”‚      authStore.setToken(token);     â”‚
â”‚      authStore.setOrganization(org);â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [3] Configuration API client       â”‚
â”‚      axios.defaults.headers.common  â”‚
â”‚        ['Authorization'] = `Bearer ${token}`;â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [4] Redirection                    â”‚
â”‚      router.push('/dashboard');     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[OPTION 2: GOOGLE OAUTH]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Utilisateur â”‚
â”‚  Clique "Google"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  @react-oauth/google                â”‚
â”‚  â””â”€ useGoogleLogin()                â”‚
â”‚     Ouvre popup Google              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ L'utilisateur s'authentifie sur Google
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google renvoie credential token    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend: POST /api/auth/google    â”‚
â”‚  Body: { credential }               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend: routes/googleAuth.ts      â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [1] VÃ©rification token Google      â”‚
â”‚      const ticket = await client.verifyIdToken({â”‚
â”‚        idToken: credential,         â”‚
â”‚        audience: GOOGLE_CLIENT_ID   â”‚
â”‚      });                             â”‚
â”‚      const payload = ticket.getPayload();â”‚
â”‚      const { email, name, picture } â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [2] Recherche ou crÃ©ation user     â”‚
â”‚      let user = await User.findOne({ email });â”‚
â”‚      if (!user) {                   â”‚
â”‚        user = await User.create({   â”‚
â”‚          email, name, avatar: pictureâ”‚
â”‚        });                           â”‚
â”‚      }                               â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [3] GÃ©nÃ©ration JWT (comme login)   â”‚
â”‚      const token = jwt.sign(...)    â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [4] RÃ©ponse                        â”‚
â”‚      res.json({ success: true, token, user });â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend stocke et redirige        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[REQUÃŠTES PROTÃ‰GÃ‰ES ULTÃ‰RIEURES]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend       â”‚
â”‚  GET /api/complaintsâ”‚
â”‚  Headers:       â”‚
â”‚  Authorization: â”‚
â”‚  Bearer eyJhbG...â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Backend Middleware: auth.ts        â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [1] Extraction token               â”‚
â”‚      const authHeader = req.headers['authorization'];â”‚
â”‚      const token = authHeader?.split(' ')[1];â”‚
â”‚      if (!token) â†’ 401              â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [2] VÃ©rification JWT               â”‚
â”‚      try {                           â”‚
â”‚        const decoded = jwt.verify(  â”‚
â”‚          token,                      â”‚
â”‚          process.env.JWT_SECRET     â”‚
â”‚        );                            â”‚
â”‚      } catch (err) {                â”‚
â”‚        â†’ 401 Invalid token          â”‚
â”‚      }                               â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [3] Injection user dans req        â”‚
â”‚      req.user = decoded;            â”‚
â”‚      // { userId, email, role, orgId }â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  [4] Passe au middleware suivant    â”‚
â”‚      next();                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Middleware: orgContext.ts          â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  const membership = await Membership.findOne({â”‚
â”‚    userId: req.user.userId          â”‚
â”‚  });                                 â”‚
â”‚  req.organizationId = membership.organizationId;â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  next();                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Route Handler                      â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  // âœ“ req.user disponible           â”‚
â”‚  // âœ“ req.organizationId disponibleâ”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  const complaints = await Complaint.find({â”‚
â”‚    organizationId: req.organizationIdâ”‚
â”‚  });                                 â”‚
â”‚  â”‚                                   â”‚
â”‚  â–¼                                   â”‚
â”‚  res.json(complaints);              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ 5. Architecture de DÃ©ploiement

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ENVIRONNEMENT DE PRODUCTION                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[INFRASTRUCTURE CLOUD]

                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   DOMAIN DNS          â”‚
                         â”‚   reclamtrack.com     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  LOAD BALANCER        â”‚
                         â”‚  (Nginx / Cloudflare) â”‚
                         â”‚  â€¢ SSL/TLS            â”‚
                         â”‚  â€¢ DDoS Protection    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                â”‚
                    â–¼                                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   FRONTEND NODES   â”‚          â”‚   BACKEND NODES    â”‚
        â”‚   (Next.js SSR)    â”‚          â”‚   (Express API)    â”‚
        â”‚                    â”‚          â”‚                    â”‚
        â”‚  Node 1: PM2       â”‚          â”‚  Node 1: PM2       â”‚
        â”‚  Node 2: PM2       â”‚          â”‚  Node 2: PM2       â”‚
        â”‚  Port: 3000        â”‚          â”‚  Port: 5001        â”‚
        â”‚                    â”‚          â”‚                    â”‚
        â”‚  â€¢ Auto-scaling    â”‚          â”‚  â€¢ Auto-scaling    â”‚
        â”‚  â€¢ Health checks   â”‚          â”‚  â€¢ Health checks   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                                   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                                â”‚
                    â–¼                                                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  KAFKA CLUSTER     â”‚                          â”‚  MICROSERVICES     â”‚
        â”‚  (3 brokers)       â”‚                          â”‚  CLUSTER           â”‚
        â”‚                    â”‚                          â”‚                    â”‚
        â”‚  Broker 1: 9092    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  6 Services        â”‚
        â”‚  Broker 2: 9093    â”‚                          â”‚  Pods K8s          â”‚
        â”‚  Broker 3: 9094    â”‚                          â”‚  Auto-scale        â”‚
        â”‚                    â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚  â€¢ Replication: 3  â”‚
        â”‚  â€¢ Partitions: 10  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  MONGODB CLUSTER   â”‚
        â”‚  (Replica Set)     â”‚
        â”‚                    â”‚
        â”‚  Primary:   27017  â”‚
        â”‚  Secondary: 27018  â”‚
        â”‚  Arbiter:   27019  â”‚
        â”‚                    â”‚
        â”‚  â€¢ Auto-failover   â”‚
        â”‚  â€¢ Daily backups   â”‚
        â”‚  â€¢ Point-in-time   â”‚
        â”‚    recovery        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[MONITORING STACK]

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PROMETHEUS        â”‚
        â”‚  Port: 9090        â”‚
        â”‚  â€¢ Metrics Storage â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  GRAFANA           â”‚
        â”‚  Port: 3001        â”‚
        â”‚  â€¢ Dashboards      â”‚
        â”‚  â€¢ Alerting        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[DOCKER COMPOSE ARCHITECTURE (DEV/STAGING)]

docker-compose.yml
â”‚
â”œâ”€ services:
â”‚   â”‚
â”‚   â”œâ”€ frontend:
â”‚   â”‚   â””â”€ build: ./frontend
â”‚   â”‚   â””â”€ ports: 3000:3000
â”‚   â”‚   â””â”€ depends_on: [backend]
â”‚   â”‚
â”‚   â”œâ”€ backend:
â”‚   â”‚   â””â”€ build: ./backend
â”‚   â”‚   â””â”€ ports: 5009:5001
â”‚   â”‚   â””â”€ depends_on: [mongo, kafka]
â”‚   â”‚
â”‚   â”œâ”€ api-gateway:
â”‚   â”‚   â””â”€ build: ./microservices/api-gateway
â”‚   â”‚   â””â”€ ports: 5001:5001
â”‚   â”‚   â””â”€ depends_on: [auth-service, complaints-service, ...]
â”‚   â”‚
â”‚   â”œâ”€ mongo:
â”‚   â”‚   â””â”€ image: mongo:7
â”‚   â”‚   â””â”€ ports: 27017:27017
â”‚   â”‚   â””â”€ volumes: [mongo-data:/data/db]
â”‚   â”‚
â”‚   â”œâ”€ kafka:
â”‚   â”‚   â””â”€ image: confluentinc/cp-kafka:7.5.0
â”‚   â”‚   â””â”€ ports: 9092:9092, 9093:9093
â”‚   â”‚   â””â”€ depends_on: [zookeeper]
â”‚   â”‚
â”‚   â”œâ”€ zookeeper:
â”‚   â”‚   â””â”€ image: confluentinc/cp-zookeeper:7.5.0
â”‚   â”‚   â””â”€ ports: 2181:2181
â”‚   â”‚
â”‚   â”œâ”€ prometheus:
â”‚   â”‚   â””â”€ image: prom/prometheus
â”‚   â”‚   â””â”€ ports: 9090:9090
â”‚   â”‚
â”‚   â”œâ”€ grafana:
â”‚   â”‚   â””â”€ image: grafana/grafana
â”‚   â”‚   â””â”€ ports: 3001:3000
â”‚   â”‚
â”‚   â””â”€ microservices: (6 services)
â”‚       â”œâ”€ auth-service:3001
â”‚       â”œâ”€ complaints-service:3002
â”‚       â”œâ”€ teams-service:3003
â”‚       â”œâ”€ notification-service:3004
â”‚       â”œâ”€ analytics-service:3005
â”‚       â””â”€ inventory-service:3006
â”‚
â””â”€ volumes:
    â”œâ”€ mongo-data
    â”œâ”€ prometheus-data
    â””â”€ grafana-data

[CI/CD PIPELINE - GITHUB ACTIONS]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Repository: reclamtrack                             â”‚
â”‚  â””â”€ .github/workflows/integration.yml                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ git push origin main
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions Workflow                                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Job 1: test-backend                                 â”‚  â”‚
â”‚  â”‚  â””â”€ npm ci                                           â”‚  â”‚
â”‚  â”‚  â””â”€ npm run lint                                     â”‚  â”‚
â”‚  â”‚  â””â”€ npm test                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Job 2: test-frontend                                â”‚  â”‚
â”‚  â”‚  â””â”€ npm ci                                           â”‚  â”‚
â”‚  â”‚  â””â”€ npm run lint                                     â”‚  â”‚
â”‚  â”‚  â””â”€ npm run type-check                               â”‚  â”‚
â”‚  â”‚  â””â”€ npm run build                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Job 3: build-docker                                  â”‚  â”‚
â”‚  â”‚  â””â”€ docker-compose build                             â”‚  â”‚
â”‚  â”‚  â””â”€ docker push registry/reclamtrack-frontend        â”‚  â”‚
â”‚  â”‚  â””â”€ docker push registry/reclamtrack-backend         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Job 4: deploy (si branch main)                      â”‚  â”‚
â”‚  â”‚  â””â”€ ssh production-server                            â”‚  â”‚
â”‚  â”‚  â””â”€ docker-compose pull                              â”‚  â”‚
â”‚  â”‚  â””â”€ docker-compose up -d --no-deps --build           â”‚  â”‚
â”‚  â”‚  â””â”€ health check                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Fin du document de diagrammes**

Pour une visualisation interactive, vous pouvez :

1. Importer ces diagrammes dans draw.io / diagrams.net
2. Utiliser Mermaid.js pour les rendre interactifs dans Markdown
3. CrÃ©er des dashboards Grafana personnalisÃ©s pour les flux en temps rÃ©el
